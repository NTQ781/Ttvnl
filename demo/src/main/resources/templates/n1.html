<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${title}">日本語学習</title>
    <link rel="stylesheet" th:href="@{/styles.css}">
    <script th:inline="javascript">
        /* Nhúng dữ liệu từ Thymeleaf và debug */
        var vocabData = /*[[${vocabularyList}]]*/ [];
        console.log("vocabData loaded:", vocabData);
    </script>
    <script th:src="@{/script.js}"></script>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div class="logo">
                    <div class="japanese-flag"></div>
                    <h1>日本語学習</h1>
                </div>
                <div class="nav-menu">
                    <button class="nav-btn">📝 Từ vựng</button>
                    <button class="nav-btn">🔤 Kanji</button>
                    <button class="nav-btn">📘 Ngữ pháp</button>
                    <button class="nav-btn">📝 Bài tập</button>
                    <button class="nav-btn">🃏 Flashcard</button>
                    <button class="nav-btn">🎧 Nghe-hiểu</button>
                </div>
            </div>
        </header>

        <main class="main-content">
            <h2 th:text="'📘 Cấp độ ' + ${level.toUpperCase()}">Cấp độ N1</h2>
            <div class="study-buttons">
                <button data-section="vocabulary">📝 Từ vựng</button>
                <button data-section="kanji">🔤 Kanji</button>
                <button data-section="grammar">📘 Ngữ pháp</button>
                <button data-section="exercise">📝 Bài tập</button>
                <button data-section="flashcard">🃏 Flashcard</button>
            </div>

            <div class="vocab-content">
                <h3>📝 Từ vựng</h3>
                <table>
                    <thead>
                        <tr>
                            <th>STT</th>
                            <th>Từ vựng</th>
                            <th>Nghĩa</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="vocab, iterStat : ${vocabularyList}">
                            <td th:text="${iterStat.count}">1</td>
                            <td th:text="${vocab.japanese}">あいず</td>
                            <td th:text="${vocab.meaning}">Tín hiệu</td>
                        </tr>
                        <tr th:if="${vocabularyList.isEmpty}">
                            <td colspan="3">Chưa có từ vựng cho cấp độ này.</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="kanji-content">
                <h3>🔤 Kanji</h3>
                <table>
                    <thead>
                        <tr>
                            <th>STT</th>
                            <th>Kanji</th>
                            <th>Âm Kun</th>
                            <th>Âm Ôn</th>
                            <th>Nghĩa</th>
                            <th>Từ vựng liên quan</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="kanji, iterStat : ${kanaList}">
                            <td th:text="${iterStat.count}">1</td>
                            <td th:text="${kanji.kana}">漢</td>
                            <td th:text="${kanji.kun}">かん</td>
                            <td th:text="${kanji.on}">カン</td>
                            <td th:text="${kanji.meaning}">Hán tự</td>
                            <td th:text="${kanji.vocab}">漢字</td>
                        </tr>
                        <tr th:if="${kanaList.isEmpty}">
                            <td colspan="6">Chưa có Kanji cho cấp độ này.</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="grammar-content">
                <h3>📘 Ngữ pháp</h3>
                <table>
                    <thead>
                        <tr>
                            <th>STT</th>
                            <th>Ngữ pháp</th>
                            <th>Nghĩa</th>
                            <th>Ví dụ</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="grammar, iterStat : ${grammarList}">
                            <td th:text="${iterStat.count}">1</td>
                            <td th:text="${grammar.form}">～ながら</td>
                            <td th:text="${grammar.meaning}">Trong khi</td>
                            <td th:text="${grammar.example}">音楽を聴きながら勉強する。</td>
                        </tr>
                        <tr th:if="${grammarList.isEmpty}">
                            <td colspan="4">Chưa có ngữ pháp cho cấp độ này.</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="exercise-content">
                <h3>📝 Bài tập</h3>
                <div th:each="exercise, iterStat : ${exerciseList}">
                    <p th:text="${exercise.question}">Câu hỏi</p>
                    <div class="quiz-options">
                        <div th:each="option : ${exercise.options}" class="quiz-option"
                             th:text="${option}">Lựa chọn</div>
                    </div>
                </div>
                <div th:if="${exerciseList.isEmpty}">
                    <p>Chưa có bài tập cho cấp độ này.</p>
                </div>
            </div>

            <div class="flashcard-content">
                <h3>🃏 Flashcard</h3>
                <!-- Flashcard sẽ được tạo động bởi JS -->
            </div>
        </main>
    </div>
</body>
</html>
